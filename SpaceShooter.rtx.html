<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Space Shooters</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
html,body{margin:0;padding:0;height:100%;background:#000;color:white;overflow:hidden;font-family:'Orbitron',sans-serif;}
#score{position:absolute;top:10px;left:10px;font-size:20px;color:red;text-shadow:0 0 10px red;}
</style>
<script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
</head>
<body>
<div id="score">Score: 0</div>
<script>
let player, cursors, bullets, enemies, score=0, lastFired=0;

const config = {
    type: Phaser.AUTO,
    width: 800,
    height: 600,
    physics: { default: 'arcade', arcade: { debug: false } },
    scene: { preload, create, update }
};

const game = new Phaser.Game(config);

function preload(){
    this.load.image('player','https://i.imgur.com/6QxNQkK.png'); // simple vaisseau
    this.load.image('bullet','https://i.imgur.com/Q8t8XnL.png');  // tir
    this.load.image('enemy','https://i.imgur.com/Fb6Xhcd.png');   // ennemi
}

function create(){
    player = this.physics.add.sprite(400,550,'player').setCollideWorldBounds(true);
    bullets = this.physics.add.group();
    enemies = this.physics.add.group();

    cursors = this.input.keyboard.createCursorKeys();
    this.input.keyboard.on('keydown-SPACE', ()=>shoot(this));

    this.time.addEvent({delay:1500, callback:spawnEnemy, callbackScope:this, loop:true});
    this.physics.add.overlap(bullets,enemies,onBulletHit,null,this);
}

function update(){
    let vx=0;
    if(cursors.left.isDown) vx=-300;
    if(cursors.right.isDown) vx=300;
    player.setVelocityX(vx);

    bullets.children.iterate(b=>{
        if(b && b.y<0) b.destroy();
    });
}

function shoot(scene){
    const now = scene.time.now;
    if(now - lastFired < 300) return;
    lastFired = now;
    const bullet = bullets.create(player.x, player.y-20,'bullet');
    bullet.setVelocityY(-500);
}

function spawnEnemy(){
    const x = Phaser.Math.Between(50,750);
    const e = enemies.create(x,0,'enemy');
    e.setVelocityY(Phaser.Math.Between(50,150));
}

function onBulletHit(bullet,enemy){
    bullet.destroy();
    enemy.destroy();
    score+=10;
    document.getElementById('score').innerText='Score: '+score;
}
</script>
</body>
</html>
